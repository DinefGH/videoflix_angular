<div class="loginContainer">
  <header>
    <app-header></app-header>
  </header>

  <main class="loginMainContainer">

    <div class="LoginHeadlineContainer">
      <h2>Log in</h2>
    </div>

    <form class="loginForm" (ngSubmit)="onLogin()" [formGroup]="loginForm">

      <mat-form-field appearance="outline">
        <mat-label>Email Address</mat-label>
        <input
          matInput
          placeholder="pat@example.com"
          formControlName="email" 
          (blur)="updateErrorMessage()"
          autocomplete="email"
          required
        />
        <mat-error *ngIf="loginForm.get('email')?.invalid">{{ errorMessage() }}</mat-error>
      </mat-form-field>

      <mat-form-field class="formFieldPassword" appearance="outline">
        <mat-label>Password</mat-label>
        <input matInput [type]="hide() ? 'password' : 'text'" formControlName="password" 
        autocomplete="new-password"
        required />
        <button
          mat-icon-button
          matSuffix
          type="button" 
          (click)="clickEvent($event)"
          [attr.aria-label]="'Hide password'"
          [attr.aria-pressed]="hide()"
        >
          <mat-icon>{{ hide() ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <mat-error *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
          {{ getPasswordErrorMessage() }}
        </mat-error>
      </mat-form-field>

      <mat-checkbox class="example-margin" formControlName="rememberMe">Remember me</mat-checkbox> <!-- Changed to formControlName -->

      <div class="loginGuestLoginContainer">
        <div class="loginButtonContainer">
          <button mat-flat-button type="submit">Log in</button>
        </div>

        <div class="loginButtonContainer">
          <button mat-stroked-button type="button" (click)="guestLogin()">Guest Login</button>
        </div>
      </div>

    </form>

    <div class="forgotContainer">
      <a class="forgotPasswordText" routerLink="/forgot-password">Forgot Password?</a>
    </div>

    <div class="signUpLinkContainer">
      <span class="signUpText">New to Videoflix?</span>
      <a class="signUpLink" routerLink="/sign-up">Sign Up Now</a>
    </div>

    <div *ngIf="loginFailed" class="notSuccessfullyLogin">Login failed! Please try again</div>

  </main>

  <footer>
    <app-footer></app-footer>
  </footer>
</div>
